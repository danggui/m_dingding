define(["View",getViewTemplatePath("MyWork_todoList"),"UIToast","TodoListModel","UIScroll","LanguageStore","TodoListStore"],function(a,b,c,d,e,f,g){var h=f.getInstance(),i=g.getInstance();return _.inherit(a,{onCreate:function(){this.$el.html(b),$("#todolist-title")[0].innerHTML=h.getAttr("language").todoList,this.els={todoList_tpl:this.$el.find("#todoList_tpl")}},events:{"touchstart .newsList":function(a){$(a.currentTarget).addClass("cur")},"touchend .newsList":function(a){$(a.currentTarget).removeClass("cur")},"touchcancel .newsList":function(a){$(a.currentTarget).removeClass("cur")},"click .newsList":function(a){a.currentTarget.attributes["todo-id"]&&this.forward("Todo_Detail&"+a.currentTarget.attributes["todo-id"].value)}},todoListData:function(){this.toast1||(this.toast1=new c({datamodel:{content:"content"},TIMERRES:!0}));var a=[],b=d.getInstance();b.execute(function(b){if("0"==b.status)return this.toast1.showToast(b.message),!1;if(0==b.data.length){var c="<ul class='form-item-list form-group-nospacing newsList'><li class='form-item-li form-item-li-nopadding' style='padding: 10px 0 0 10px;'><h1>"+h.getAttr("language").noTodoList;this.$("#scroller")[0].innerHTML=c}else i.setAttr("todoListStore",JSON.stringify(b.data)),_.each(b.data,function(b,c,e){a.push(d.viewModel(b.id,b.type,b.a_date,b.s_date,b.e_date,b.days,b.applicant,b.reason)),a[c].ApplicationDate=h.getAttr("language").ApplicationDate}),this.$("#scroller").append(_.template(this.els.todoList_tpl.html())({todo_list_data:a}))},function(a){},this)},onPreShow:function(){this.turning()},onShow:function(){var a=this;a.$("#scroller").empty(),a.todoListData()},onHide:function(){}})});