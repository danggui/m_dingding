define(["View",getViewTemplatePath("MyWork_calander"),"UICalendar","LanguageStore"],function(a,b,c,d){var e=d.getInstance(),f=this;return _.inherit(a,{onCreate:function(){this.$el.html(b),$("#calander")[0].innerHTML=e.getAttr("language").calander,$("#morning")[0].innerHTML=e.getAttr("language").morning,$("#afternoon")[0].innerHTML=e.getAttr("language").afternoon,$("#AMPM-Confirm")[0].innerHTML=e.getAttr("language").confirm},events:{"click .AMPM-box .AMPM":"AMPMChange","click #AMPM-Confirm":"confirmDate"},AMPMChange:function(a){$(".AMPM-box .AMPM").removeClass("ct-ui_cld_day_NOW"),$(a.target).addClass("ct-ui_cld_day_NOW"),f.calendar.selectedDate=$(a.target)},confirmDate:function(a){var b=location.href.substring(location.href.indexOf("&")+1,location.href.length),c=[];$(".ct-ui_cld_day_NOW").each(function(){c.push($(this).attr("data-date"))}),"S"==b?(localStorage.leaveStartTime=c[0],localStorage.leaveStartHalfDay=c[1]):(localStorage.leaveEndTime=c[0],localStorage.leaveEndHalfDay=c[1]),this.back()},onPreShow:function(){this.turning()},onShow:function(){"zh_cn"==e.getAttr("language").languageFlag?this.calendar||(this.calendar=new c({datamodel:{displayMonthNum:1},wrapper:this.$el.find(".calander")})):this.calendar||(this.calendar=new c({datamodel:{weekDayArr:["S","M","T","W","Th","F","Sa"],MonthClapFn:function(a,b){return b+=1,a+" "+this.monthnameArr[b-1]},displayMonthNum:1},wrapper:this.$el.find(".calander")})),this.calendar.show(),f.calendar=this.calendar},onHide:function(){}})});