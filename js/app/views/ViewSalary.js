define(["View",getViewTemplatePath("ViewSalary"),"UIToast","UIGroupList","UIRadioList","SalaryStore","SalaryModel","SalaryCalendarModel","SalaryBasicInfoModel","LanguageStore","UILoading"],function(a,b,c,d,e,f,g,h,i,j,k){var l=l||[],m=j.getInstance(),n="",o=[];return _.inherit(a,{onCreate:function(){this.$el.html(b),$("#salary-title")[0].innerHTML=m.getAttr("language").payslip,n=m.getAttr("language").aboutCDPInfo,this.els={basic_salary_tpl:this.$el.find("#basic_salary_tpl")},this.toast1||(this.toast1=new c({datamodel:{content:"content"},TIMERRES:!0})),this.loading1||(this.loading1=new k({maskToHide:!0}));var a=h.getInstance();a.execute(function(a){return"0"==a.status?(this.toast1.showToast(a.message),!1):void(0==a.data?this.toast1.showToast(m.getAttr("language").alertSalary):(_.each(a.data,function(a,b,c){l.push(h.viewCModel(a.id,"","",""))}),$("#input_month")[0].innerHTML=l[0].id,demodataBasic=[],this.grouplistBasic||this.showSalaryDetail()))},function(a){0},this,function(a){},{})},events:{"click #selectMonth":"selectMonth_fun","click #pie_chart_btn":"pieChartShow"},pieChartShow:function(){$(".pieChart").toggle()},pieChart:function(a){this.valueslist=a;for(var b=this,c=0,d=[],e=0;e<this.valueslist.length;e++)c+=this.valueslist[e].value;for(var e=0;e<b.valueslist.length;e++)d.push([b.valueslist[e].name,parseFloat(b.valueslist[e].value/c)]);this.chart=new Highcharts.Chart({chart:{renderTo:"pieChart",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,marginRight:0,marginBottom:0,width:300,height:350},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1}}},series:[{type:"pie",name:m.getAttr("language").share,data:d}],credits:{enabled:!1}})},formatNum:function(a){return"string"!=typeof a&&void 0!=a?(a.toFixed(2)+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,"):a},selectMonth_fun:function(){if(!this.selectMonth_radio){var a=l,b=this;this.selectMonth_radio=new e({datamodel:{title:m.getAttr("language").ChooseDate,data:a},displayNum:5,selectId:0,index:0,onClick:function(a,c){b.$("#input_month")[0].innerHTML=c.id,$("#basic_salary_wrap .form-item-li").remove(),b.showSalaryDetail(),this.hide()}}),this.selectMonth_radio.setIndex(0)}this.selectMonth_radio.show()},onPreShow:function(){this.turning()},showSalaryDetail:function(){scope=this,o=[];var a=i.getInstance();a.execute(function(a){var b=this;if("0"==a.status)return this.toast1.showToast(a.message),!1;this.loading1.show();var c=0;_.each(a.data,function(a,e,f){if(a.items){void 0!=a.currency?currency02=m.getAttr("language").PBrackets+a.currency+m.getAttr("language").ABrackets+m.getAttr("language").Colon:currency02=m.getAttr("language").Colon,b.color=a.color;var a=a.items}else void 0!=a.currency?currency02=m.getAttr("language").PBrackets+a.currency+m.getAttr("language").ABrackets+m.getAttr("language").Colon:currency02=m.getAttr("language").Colon;if(!a.length||"string"!=typeof a){"total_summary"!=a.code&&$("#basic_salary_wrap").append(_.template($(basic_salary_tpl).html())({basic_salaryTitle:e+currency02,basic_salaryCon:a,basic_salaryId:"basic_salary0"+c,basic_salaryColor:b.color}));var g="groupData"+c,g=[];if(a.length)if("string"==typeof a)g.push({gname:"",name:"",content:"",data:[],directUrl:!1,style:"font-weight:bold",additionInfo:""});else{_.each(a,function(a){if(a.code){if("BLUE"==b.color)var c="color:#00bbd3;font-weight:bold",d="BLUE-title-bg";else if("RED"==b.color)var c="color:#FF3E3E;font-weight:bold",d="RED-title-bg";else var c="color:#3ABC2B;font-weight:bold",d="GREEN-title-bg";g.push({gname:"",name:a.item,content:scope.formatNum(a.value),data:[],directUrl:!1,style:c,divBG:d})}else g.push({gname:"",name:a.item,content:scope.formatNum(a.value),data:[],directUrl:!1});o.push({name:a.item,value:Math.abs(a.value)})})}else a.show||void 0===a.show?($("#salary_total_wrap").children().remove(),$("#salary_total_wrap").append(_.template($(basic_salary_tp0).html())({total_salaryTitle:a.item+m.getAttr("language").PBrackets+a.currency+m.getAttr("language").ABrackets+m.getAttr("language").Colon,total_salaryVal:scope.formatNum(a.value)}))):$("#salary_total_wrap").remove(),$("#aboutCDP")[0].innerHTML=n;this.grouplist=new d({datamodel:{data:g},wrapper:this.$("#basic_salary0"+c)}),this.grouplist.show(),c++}}),this.pieChart(o),this.loading1.hide()},function(a){0},this,function(a){},{calendar:$("#input_month")[0].innerHTML})},onShow:function(){},onHide:function(){this.selectMonth_radio&&this.selectMonth_radio.hide()}})});